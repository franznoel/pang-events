<!DOCTYPE HTML>
<html>
    <head>
        <title>pangEvents</title>
        <link rel="stylesheet" type="text/css" href="bower_components/foundation-sites/dist/foundation.min.css" />
        <link rel="stylesheet" type="text/css" href="bower_components/foundation-icon-fonts/foundation-icons.css" />
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
      <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
      <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
      <script type="text/javascript" src="bower_components/foundation-sites/dist/foundation.min.js"></script>
      <script type="text/javascript" src="script.js"></script>
      <header>
        <div id="menu" class="top-bar">
          <div class="top-bar-left">
            <ul class="menu" data-dropdown-menu>
              <li class="menu-text"><a href="/">PangEvents</a></li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="menu">
              <li class="credentials"><a href="/sign-in.html" class="button">Sign In</a></li>
            </ul>
          </div>
        </div>
      </header>

      <div id="content" class="row">
        <div class="large-12 columns">
          <div id="event-add" class="large-12 columns">
            <div class="row">
              <div class="small-12 large-12 columns">
                <h2>New Year's Celebration</h2>
                <hr/>
              </div>
            </div>

            <div id="event-info">
              <div class="row">
                <div class="small-12 large-4 columns">
                  <label for="eventHost">Host</label>
                  <p>John Smith</p>
                  <label for="eventType">Event Type</label>
                  <p>Party</p>
                  <label for="eventStartTime">Event Start</label>
                  <p>January 2, 2016 12:30 PM</p>
                  <label for="eventEndTime">Event End</label>
                  <p>January 2, 2016 12:30 PM</p>
                  <label for="eventAddress">
                    <p>1234 Main St,<br/> 
                      Los Angeles, CA 90034</p>
                  </label>
                </div>

                <div class="small-12 large-8 columns end">
                  <fieldset class="fieldset">
                    <h4>Guest List</h4>
                    <label for="guestEmail">Guest's Email</label>
                    <input type="text" name="guestEmail" value="" placeholder="Guest's Email" />
                    <input type="submit" name="submit" class="button" value="Add Guest">
                    <ul class="guest-list">
                      <li>johnsmith@gmail.com</li>
                      <li>janesmith@gmail.com</li>
                    </ul>
                  </fieldset>
                </div>                
              </div>
              <a href="/event-add.html" class="button secondary">Back</a>
            </div>
          </div>
        </div>
        <!-- #event-category -->
      </div>

      <script type="text/javascript">
        $("#eventType").val(getParameterByName('eventType'));

        var ref = new Firebase("https://pang-events.firebaseio.com");
        var eventsRef = ref.child('events');
        var data = {
          eventName: $("#eventName").val(),
          eventType: $("#eventType").val(),
          eventHost: $("#eventHost").val(),
          eventStartTime: $("#eventStartTime").val(),
          eventAddress: $("#eventAddress").val(),
          eventAddressCity: $("#eventAddressCity").val(),
          eventAddressState: $("#eventAddressState").val(),
          eventAddressZip: $("#eventAddressZip").val()
        };
        
        $("#event-add-form").on("submit",function(event) {
          event.preventDefault();
          console.log(data);
          eventsRef.push().set(data); 
        });

        var isNewUser = true;

        ref.onAuth(function(authData) {
          if (authData && isNewUser) {
            // save the user's profile into the database so we can list users,
            // use them in Security and Firebase Rules, and show profiles
            var userData = {
              provider: authData.provider,
              name: getName(authData)
            };
            console.log(userData);
            ref.child("users").child(authData.uid).set(userData);
            $(".credentials").html('<a href="javascript:logout()" class="button">' + userData.name + '</button>');
          }
        });

      </script>
    </body>
</html>